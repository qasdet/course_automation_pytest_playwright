# 06 — GitLab CI: настройка конвейера для тестов

Цели:

- Настроить pipeline для unit и e2e тестов
- Понять кэширование зависимостей и артефакты
- Запускать Playwright E2E в CI

Пример `.gitlab-ci.yml` (в корне курса) уже содержит базовые job'ы:

- `unit_tests` — запускает `pytest` в образе `python:3.11-slim`
- `playwright_e2e` — использует образ `mcr.microsoft.com/playwright/python:latest` и запускает тесты, помеченные `-m e2e`

Практические задания:

1. Создайте минимальный pipeline и запустите его в вашем GitLab (в приватном проекте).
2. Добавьте job, который собирает отчет `junitxml` и загружает его как артефакт.
3. Настройте переменные CI (`TOKEN`, `REDIS_URL` и пр.) в настройках проекта.

Советы:

- Для уменьшения времени используйте кэш pip.
- Для сложных сценариев используйте docker‑in‑docker или image с браузерами.
