# 05 ‚Äî E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## üéØ –¶–µ–ª–∏ —ç—Ç–æ–≥–æ —ç—Ç–∞–ø–∞

- –û—Å–≤–æ–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã—Ö end-to-end —Ç–µ—Å—Ç–æ–≤, –∏–º–∏—Ç–∏—Ä—É—é—â–∏—Ö —Ä–µ–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ù–∞—É—á–∏—Ç—å—Å—è –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞
- –ü–æ–Ω—è—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø—ã Page Object Model –∏ –¥—Ä—É–≥–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –û–≤–ª–∞–¥–µ—Ç—å —Ç–µ—Ö–Ω–∏–∫–∞–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏, –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏–∏ –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏ E2E —Ç–µ—Å—Ç–æ–≤
- –ù–∞—É—á–∏—Ç—å—Å—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ flaky —Ç–µ—Å—Ç—ã

## üìö –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å–Ω–æ–≤—ã E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ß—Ç–æ —Ç–∞–∫–æ–µ E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ?

**End-to-End (E2E) —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - —ç—Ç–æ –º–µ—Ç–æ–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞, –∫–∞–∫ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.

#### –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ E2E —Ç–µ—Å—Ç–æ–≤:

‚úÖ **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç—å** - –∏–º–∏—Ç–∏—Ä—É—é—Ç –Ω–∞—Å—Ç–æ—è—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚úÖ **–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ—Å—Ç—å** - –æ—Ö–≤–∞—Ç—ã–≤–∞—é—Ç –≤—Å—é —Å–∏—Å—Ç–µ–º—É —Ü–µ–ª–∏–∫–æ–º
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å** - –ø—Ä–æ–≤–µ—Ä—è—é—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚úÖ **–ë–∏–∑–Ω–µ—Å-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** - —Ñ–æ–∫—É—Å–∏—Ä—É—é—Ç—Å—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö

#### –û—Ç–ª–∏—á–∏—è –æ—Ç –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ —Ç–µ—Å—Ç–æ–≤:

| –ê—Å–ø–µ–∫—Ç | Unit Tests | Integration Tests | E2E Tests |
|--------|------------|-------------------|-----------|
| **–û–±–ª–∞—Å—Ç—å** | –§—É–Ω–∫—Ü–∏—è/–∫–ª–∞—Å—Å | –ú–æ–¥—É–ª—å/—Å–µ—Ä–≤–∏—Å | –í—Å—è —Å–∏—Å—Ç–µ–º–∞ |
| **–°–∫–æ—Ä–æ—Å—Ç—å** | –û—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–µ | –°—Ä–µ–¥–Ω–∏–µ | –ú–µ–¥–ª–µ–Ω–Ω—ã–µ |
| **–°—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏** | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∞—è |
| **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** | –û—á–µ–Ω—å —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ | –°—Ä–µ–¥–Ω—è—è | –ß–∞—Å—Ç–æ flaky |
| **–ü–æ–∫—Ä—ã—Ç–∏–µ** | –£–∑–∫–æ–µ | –°—Ä–µ–¥–Ω–µ–µ | –®–∏—Ä–æ–∫–æ–µ |

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ E2E —Ç–µ—Å—Ç–æ–≤

```
E2E Test Framework
‚îú‚îÄ‚îÄ Test Runner (pytest)
‚îú‚îÄ‚îÄ Test Structure
‚îÇ   ‚îú‚îÄ‚îÄ tests/                 # –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ pages/                 # Page Objects
‚îÇ   ‚îú‚îÄ‚îÄ components/            # Component Objects
‚îÇ   ‚îú‚îÄ‚îÄ fixtures/              # –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ utils/                 # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ Configuration
‚îÇ   ‚îú‚îÄ‚îÄ conftest.py           # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ config/               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ environments/         # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏–π
‚îî‚îÄ‚îÄ Reporting
    ‚îú‚îÄ‚îÄ reports/              # –û—Ç—á–µ—Ç—ã –∏ –ª–æ–≥–∏
    ‚îú‚îÄ‚îÄ screenshots/          # –°–∫—Ä–∏–Ω—à–æ—Ç—ã
    ‚îî‚îÄ‚îÄ videos/               # –í–∏–¥–µ–æ–∑–∞–ø–∏—Å–∏ —Ç–µ—Å—Ç–æ–≤
```

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è E2E —Ç–µ—Å—Ç–æ–≤

#### 1. Page Object Model (POM)
- –ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
- –ü–æ–≤—ã—à–µ–Ω–∏–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ—Å—Ç–∏ –∫–æ–¥–∞
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ç–µ—Å—Ç–æ–≤

#### 2. Component Object Model
- –†–∞–∑–±–∏–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –ü–æ–≤—ã—à–µ–Ω–∏–µ –º–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏
- –£–ø—Ä–æ—â–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

#### 3. Data Builder Pattern
- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–≤—ã—à–µ–Ω–∏–µ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ —Ç–µ—Å—Ç–æ–≤
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

#### 4. Factory Pattern
- –°–æ–∑–¥–∞–Ω–∏–µ page/component –æ–±—ä–µ–∫—Ç–æ–≤
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –ì–∏–±–∫–æ—Å—Ç—å –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤

## üõ†Ô∏è –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
e2e_project/
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ conftest.py
‚îÇ   ‚îú‚îÄ‚îÄ test_user_flows.py
‚îÇ   ‚îú‚îÄ‚îÄ test_authentication.py
‚îÇ   ‚îî‚îÄ‚îÄ test_checkout_process.py
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ base_page.py
‚îÇ   ‚îú‚îÄ‚îÄ login_page.py
‚îÇ   ‚îú‚îÄ‚îÄ dashboard_page.py
‚îÇ   ‚îî‚îÄ‚îÄ product_page.py
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ navigation_menu.py
‚îÇ   ‚îú‚îÄ‚îÄ search_bar.py
‚îÇ   ‚îî‚îÄ‚îÄ cart_widget.py
‚îú‚îÄ‚îÄ fixtures/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ user_fixtures.py
‚îÇ   ‚îî‚îÄ‚îÄ data_fixtures.py
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ test_data_builder.py
‚îÇ   ‚îú‚îÄ‚îÄ wait_helpers.py
‚îÇ   ‚îî‚îÄ‚îÄ screenshot_helper.py
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ settings.py
‚îÇ   ‚îî‚îÄ‚îÄ environments.py
‚îú‚îÄ‚îÄ reports/
‚îÇ   ‚îú‚îÄ‚îÄ html_reports/
‚îÇ   ‚îú‚îÄ‚îÄ xml_reports/
‚îÇ   ‚îî‚îÄ‚îÄ screenshots/
‚îî‚îÄ‚îÄ requirements.txt
```

### –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è Page Object

```python
# pages/base_page.py
from playwright.sync_api import Page, Locator
from typing import Optional


class BasePage:
    """–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö page objects"""
    
    def __init__(self, page: Page):
        self.page = page
        self.timeout = 30000
    
    def navigate_to(self, url: str) -> None:
        """–ù–∞–≤–∏–≥–∞—Ü–∏—è –∫ URL"""
        self.page.goto(url)
        self.wait_for_page_load()
    
    def wait_for_page_load(self) -> None:
        """–û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã"""
        self.page.wait_for_load_state("networkidle")
    
    def get_element(self, selector: str) -> Locator:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å –±–∞–∑–æ–≤—ã–º —Ç–∞–π–º–∞—É—Ç–æ–º"""
        return self.page.locator(selector).first
    
    def click_element(self, selector: str) -> None:
        """–ö–ª–∏–∫ –ø–æ —ç–ª–µ–º–µ–Ω—Ç—É —Å –æ–∂–∏–¥–∞–Ω–∏–µ–º"""
        element = self.get_element(selector)
        element.wait_for(state="visible", timeout=self.timeout)
        element.click()
    
    def fill_field(self, selector: str, value: str) -> None:
        """–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª—è –≤–≤–æ–¥–∞"""
        element = self.get_element(selector)
        element.wait_for(state="visible", timeout=self.timeout)
        element.fill(value)
    
    def get_text(self, selector: str) -> str:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —ç–ª–µ–º–µ–Ω—Ç–∞"""
        element = self.get_element(selector)
        element.wait_for(state="visible", timeout=self.timeout)
        return element.text_content() or ""
    
    def is_element_visible(self, selector: str) -> bool:
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏ —ç–ª–µ–º–µ–Ω—Ç–∞"""
        try:
            element = self.get_element(selector)
            return element.is_visible()
        except:
            return False


# pages/login_page.py
from pages.base_page import BasePage
from typing import Optional


class LoginPage(BasePage):
    """Page Object –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ª–æ–≥–∏–Ω–∞"""
    
    # –õ–æ–∫–∞—Ç–æ—Ä—ã
    USERNAME_INPUT = "input[name='username']"
    PASSWORD_INPUT = "input[name='password']"
    LOGIN_BUTTON = "button[type='submit']"
    ERROR_MESSAGE = ".error-message"
    SUCCESS_REDIRECT = ".dashboard"
    
    def __init__(self, page: Page):
        super().__init__(page)
        self.url = "https://example.com/login"
    
    def load(self) -> None:
        """–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ª–æ–≥–∏–Ω–∞"""
        self.navigate_to(self.url)
    
    def login(self, username: str, password: str) -> None:
        """–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–Ω–∞"""
        self.fill_field(self.USERNAME_INPUT, username)
        self.fill_field(self.PASSWORD_INPUT, password)
        self.click_element(self.LOGIN_BUTTON)
    
    def get_error_message(self) -> Optional[str]:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ"""
        if self.is_element_visible(self.ERROR_MESSAGE):
            return self.get_text(self.ERROR_MESSAGE)
        return None
    
    def is_logged_in(self) -> bool:
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –ª–æ–≥–∏–Ω–∞"""
        return self.is_element_visible(self.SUCCESS_REDIRECT)
```

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ —Å Page Objects

```python
# tests/test_authentication.py
import pytest
from pages.login_page import LoginPage
from pages.dashboard_page import DashboardPage


class TestAuthentication:
    """–¢–µ—Å—Ç—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏"""
    
    def test_successful_login(self, page):
        """–¢–µ—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ –ª–æ–≥–∏–Ω–∞"""
        # ARRANGE
        login_page = LoginPage(page)
        dashboard_page = DashboardPage(page)
        
        # ACT
        login_page.load()
        login_page.login("valid_user", "valid_password")
        
        # ASSERT
        assert dashboard_page.is_loaded()
        assert dashboard_page.get_username() == "valid_user"
    
    def test_invalid_credentials(self, page):
        """–¢–µ—Å—Ç –Ω–µ–≤–µ—Ä–Ω—ã—Ö —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö"""
        # ARRANGE
        login_page = LoginPage(page)
        
        # ACT
        login_page.load()
        login_page.login("invalid_user", "wrong_password")
        
        # ASSERT
        error_message = login_page.get_error_message()
        assert error_message is not None
        assert "Invalid credentials" in error_message
        assert not login_page.is_logged_in()
    
    @pytest.mark.parametrize("username,password,expected_error", [
        ("", "password", "Username is required"),
        ("user", "", "Password is required"),
        ("", "", "Username is required"),
    ])
    def test_required_fields(self, page, username, password, expected_error):
        """–¢–µ—Å—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π"""
        # ARRANGE
        login_page = LoginPage(page)
        
        # ACT
        login_page.load()
        login_page.login(username, password)
        
        # ASSERT
        error_message = login_page.get_error_message()
        assert error_message is not None
        assert expected_error in error_message
```

### Component Object Pattern

```python
# components/navigation_menu.py
from playwright.sync_api import Page, Locator


class NavigationMenu:
    """Component Object –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –º–µ–Ω—é"""
    
    MENU_TOGGLE = ".menu-toggle"
    MENU_ITEMS = ".menu-item"
    ACTIVE_ITEM = ".menu-item.active"
    
    def __init__(self, page: Page):
        self.page = page
    
    def open_menu(self) -> None:
        """–û—Ç–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é"""
        self.page.locator(self.MENU_TOGGLE).click()
    
    def click_menu_item(self, item_text: str) -> None:
        """–ö–ª–∏–∫ –ø–æ –ø—É–Ω–∫—Ç—É –º–µ–Ω—é"""
        menu_items = self.page.locator(self.MENU_ITEMS)
        menu_items.filter(has_text=item_text).click()
    
    def get_active_item(self) -> str:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞ –º–µ–Ω—é"""
        return self.page.locator(self.ACTIVE_ITEM).text_content() or ""


# pages/dashboard_page.py
from pages.base_page import BasePage
from components.navigation_menu import NavigationMenu


class DashboardPage(BasePage):
    """Page Object –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞"""
    
    USERNAME_DISPLAY = ".user-name"
    LOGOUT_BUTTON = ".logout-btn"
    
    def __init__(self, page: Page):
        super().__init__(page)
        self.navigation = NavigationMenu(page)
    
    def is_loaded(self) -> bool:
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã"""
        return self.is_element_visible(self.USERNAME_DISPLAY)
    
    def get_username(self) -> str:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        return self.get_text(self.USERNAME_DISPLAY)
    
    def logout(self) -> None:
        """–í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã"""
        self.click_element(self.LOGOUT_BUTTON)
```

## üîÑ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### Data Builder Pattern

```python
# utils/test_data_builder.py
from dataclasses import dataclass
from typing import Optional
import random
import string


@dataclass
class UserData:
    """–ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö"""
    username: str
    email: str
    password: str
    first_name: str
    last_name: str


class TestDataBuilder:
    """Builder –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö"""
    
    @staticmethod
    def random_string(length: int = 8) -> str:
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–π —Å—Ç—Ä–æ–∫–∏"""
        return ''.join(random.choices(string.ascii_lowercase, k=length))
    
    @staticmethod
    def random_email() -> str:
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ email"""
        return f"{TestDataBuilder.random_string()}@test.com"
    
    @classmethod
    def valid_user(cls) -> UserData:
        """–°–æ–∑–¥–∞–Ω–∏–µ –≤–∞–ª–∏–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        return UserData(
            username=cls.random_string(),
            email=cls.random_email(),
            password="SecurePass123!",
            first_name="John",
            last_name="Doe"
        )
    
    @classmethod
    def invalid_user(cls) -> UserData:
        """–°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        return UserData(
            username="",
            email="invalid-email",
            password="123",
            first_name="",
            last_name=""
        )


# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ç–µ—Å—Ç–∞—Ö
def test_user_registration(page):
    """–¢–µ—Å—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    user_data = TestDataBuilder.valid_user()
    
    registration_page = RegistrationPage(page)
    registration_page.register(
        username=user_data.username,
        email=user_data.email,
        password=user_data.password
    )
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∏...
```

## üìä –ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
pip install pytest-xdist pytest-html

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
pytest -n 4  # 4 –ø—Ä–æ—Ü–µ—Å—Å–∞
pytest -n auto  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

# –ó–∞–ø—É—Å–∫ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ –∫–ª–∞—Å—Å–∞–º
pytest -n auto --dist=loadscope

# –ó–∞–ø—É—Å–∫ —Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –ø–æ —Ñ–∞–π–ª–∞–º
pytest -n auto --dist=loadfile
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏

```python
# conftest.py - –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
import pytest
import os
from datetime import datetime


@pytest.fixture(scope="session")
def test_results_dir():
    """–§–∏–∫—Å—Ç—É—Ä–∞ –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤"""
    results_dir = "test_results"
    os.makedirs(results_dir, exist_ok=True)
    return results_dir


@pytest.fixture(autouse=True)
def screenshot_on_failure(request, page, test_results_dir):
    """–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö"""
    yield
    
    if request.node.rep_call.failed:
        timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
        test_name = request.node.name
        screenshot_path = os.path.join(
            test_results_dir, 
            f"failure_{test_name}_{timestamp}.png"
        )
        page.screenshot(path=screenshot_path, full_page=True)


def pytest_html_report_title(report):
    """–ó–∞–≥–æ–ª–æ–≤–æ–∫ HTML –æ—Ç—á–µ—Ç–∞"""
    report.title = "E2E Test Report"


def pytest_configure(config):
    """–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest"""
    config.option.htmlpath = "reports/report.html"
    config.option.self_contained_html = True
```

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤

```bash
# HTML –æ—Ç—á–µ—Ç
pytest --html=reports/report.html --self-contained-html

# JUnit XML –¥–ª—è CI/CD
pytest --junitxml=reports/results.xml

# –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
pytest --cov=pages --cov-report=html:reports/coverage

# –í—Å–µ –æ—Ç—á–µ—Ç—ã —Å—Ä–∞–∑—É
pytest -n auto \
    --html=reports/report.html \
    --self-contained-html \
    --junitxml=reports/results.xml \
    --cov=pages \
    --cov-report=html:reports/coverage
```

## ü§î –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã (FAQ)

### **Q: –ö–∞–∫ –±–æ—Ä–æ—Ç—å—Å—è —Å flaky E2E —Ç–µ—Å—Ç–∞–º–∏?**
**A:** 
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã
- –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ–∂–∏–¥–∞–Ω–∏—è
- –ò–∑–æ–ª–∏—Ä—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ retry mechanisms
- –î–æ–±–∞–≤—å—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### **Q: –°–∫–æ–ª—å–∫–æ E2E —Ç–µ—Å—Ç–æ–≤ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å?**
**A:** –°–ª–µ–¥—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–π –ø–∏—Ä–∞–º–∏–¥–µ: 70% unit, 20% integration, 10% E2E. –§–æ–∫—É—Å–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö.

### **Q: –ö–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ?**
**A:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ data builders, —Ñ–∏–∫—Å—Ç—É—Ä—ã –∏ –æ—Ç–¥–µ–ª—è–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç —Ç–µ—Å—Ç–æ–≤–æ–π –ª–æ–≥–∏–∫–∏.

### **Q: –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Page Object, –∞ –∫–æ–≥–¥–∞ Component Object?**
**A:** Page Object –¥–ª—è —Ü–µ–ª—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü, Component Object –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–º–µ–Ω—é, —Ñ–æ—Ä–º—ã, –≤–∏–¥–∂–µ—Ç—ã).

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- [ ] –ò—Å–ø–æ–ª—å–∑—É—é Page Object Model –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü
- [ ] –ü—Ä–∏–º–µ–Ω—è—é Component Object –¥–ª—è UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [ ] –°–æ–∑–¥–∞—é –±–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- [ ] –û—Ä–≥–∞–Ω–∏–∑—É—é —á–µ—Ç–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞

### –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- [ ] –ò—Å–ø–æ–ª—å–∑—É—é data builders –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- [ ] –ò–∑–æ–ª–∏—Ä—É—é —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç production
- [ ] –°–æ–∑–¥–∞—é —Ñ–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –¥–∞–Ω–Ω—ã—Ö
- [ ] –û–±–µ—Å–ø–µ—á–∏–≤–∞—é —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
- [ ] –ò—Å–ø–æ–ª—å–∑—É—é —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã
- [ ] –î–æ–±–∞–≤–ª—è—é –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ–∂–∏–¥–∞–Ω–∏—è
- [ ] –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
- [ ] –î–æ–±–∞–≤–ª—è—é retry mechanisms –¥–ª—è flaky —Ç–µ—Å—Ç–æ–≤

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- [ ] –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—é –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- [ ] –ò—Å–ø–æ–ª—å–∑—É—é session-scoped —Ñ–∏–∫—Å—Ç—É—Ä—ã
- [ ] –ú–∏–Ω–∏–º–∏–∑–∏—Ä—É—é –≤—Ä–µ–º—è setup/teardown

### –û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å
- [ ] –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—é HTML –æ—Ç—á–µ—Ç—ã
- [ ] –î–æ–±–∞–≤–ª—è—é —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- [ ] –ì–µ–Ω–µ—Ä–∏—Ä—É—é JUnit XML –¥–ª—è CI/CD
- [ ] –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—é –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ

### –ß–∞—Å—Ç—å 1: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
1. –°–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ —Å Page Objects
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ page objects –¥–ª—è –¥–µ–º–æ —Å–∞–π—Ç–∞

### –ß–∞—Å—Ç—å 2: –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
1. –ù–∞–ø–∏—à–∏—Ç–µ E2E —Ç–µ—Å—Ç—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ data builders –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
3. –î–æ–±–∞–≤—å—Ç–µ component objects –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤

### –ß–∞—Å—Ç—å 3: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å
1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
3. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ HTML –∏ XML –æ—Ç—á–µ—Ç—ã

## ‚ö†Ô∏è –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

| –û—à–∏–±–∫–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|--------|---------|---------|
| "Element not found" | –•—Ä—É–ø–∫–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã (data-testid) |
| "Timeout waiting for element" | –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ–∂–∏–¥–∞–Ω–∏—è | –î–æ–±–∞–≤—å—Ç–µ —è–≤–Ω—ã–µ –æ–∂–∏–¥–∞–Ω–∏—è –∏–ª–∏ —É–≤–µ–ª–∏—á—å—Ç–µ —Ç–∞–π–º–∞—É—Ç—ã |
| "Tests interfering with each other" | –ù–µ—Ç –∏–∑–æ–ª—è—Ü–∏–∏ | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ browser contexts |
| "Flaky tests" | –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç | –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ wait conditions |

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏ –ø—Ä–∞–∫—Ç–∏–∫–∏:
- **Page Object Model** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è UI —Ç–µ—Å—Ç–æ–≤
- **Component Object Model** - –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Factory Pattern** - –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- **Data Builder Pattern** - –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
- **pytest-xdist** - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
- **pytest-html** - HTML –æ—Ç—á–µ—Ç—ã
- **allure-pytest** - –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å
- **playwright-trace** - —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤

### Best Practices:
- –°–ª–µ–¥—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–π –ø–∏—Ä–∞–º–∏–¥–µ
- –î–µ–ª–∞–π—Ç–µ —Ç–µ—Å—Ç—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ —Ç–µ—Å—Ç—ã –≤ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
- –î–æ–±–∞–≤–ª—è–π—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –¥–ª—è flaky —Ç–µ—Å—Ç–æ–≤