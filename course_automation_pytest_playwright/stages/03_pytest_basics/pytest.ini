# pytest.ini - Конфигурационный файл pytest

[pytest]
# Базовые настройки
minversion = 7.0
testpaths = tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Вывод и отчетность
addopts = 
    -v
    --tb=short
    --strict-markers
    --disable-warnings
    --color=yes

# Маркеры тестов
markers =
    slow: медленные тесты (запускать с -m "not slow")
    fast: быстрые тесты
    integration: интеграционные тесты
    unit: модульные тесты
    database: тесты с базой данных
    api: тесты с внешними API
    skip: пропущенные тесты
    xfail: ожидаемо падающие тесты

# Настройки для покрытия кода
[coverage:run]
source = src
omit = 
    */tests/*
    */venv/*
    */.venv/*

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.:

# Настройки для логирования
[loggers]
keys = root,pytest

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = INFO
handlers = console

[logger_pytest]
level = DEBUG
handlers = console
qualname = pytest

[handler_console]
class = StreamHandler
level = DEBUG
formatter = generic
args = (sys.stdout,)

[formatter_generic]
format = %(asctime)s [%(levelname)s] %(name)s: %(message)s
datefmt = %Y-%m-%d %H:%M:%S